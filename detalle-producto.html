<!DOCTYPE html> 
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle del Producto</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
                
        /* Header */

        .subheader {
        font-size: 0.45em; /* Tamaño más pequeño */
        font-weight: normal; /* Peso normal para diferenciar del encabezado */
        color: white; /* Mismo color blanco que el texto principal */
        display: block; /* Para asegurarte de que se muestre en una nueva línea */
        margin-top: -5px; /* Ajuste para reducir el espacio entre los textos */
        }

        #producto-detalle {
            text-align: center;
        }

        #producto-detalle img {
            display: block;
            margin: 0 auto;
        }

        .carousel-inner img {
            max-height: 500px;
            object-fit: contain;
            cursor: pointer; /* Aparece el cursor de puntero al pasar sobre las imágenes */
        }

        /* Estilo para el modal */
        .modal-content img {
            width: 100%;
            max-height: 80vh; /* La imagen no se expandirá más allá del 80% de la altura de la ventana */
            object-fit: contain;
        }

        /* Estilo para los botones de control del carrusel */
        .carousel-control-prev-icon,
        .carousel-control-next-icon {
            background-color: black; /* Cambiar los íconos de los botones a negro */
        }

        /* Estilo para el contenedor de los botones de control */
        .carousel-control-prev,
        .carousel-control-next {
            filter: invert(100%); /* Asegura que el ícono negro sea visible en el fondo blanco */
        }

        /* Cuando el mouse pasa sobre los botones de control, cambiar el color */
        .carousel-control-prev:hover,
        .carousel-control-next:hover {
            background-color: black; /* Aseguramos que el fondo sea negro al pasar el mouse */
        }

        /* Estilo para el botón de WhatsApp */
        .whatsapp-btn {
            background-color: #25d366;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-size: 1.2rem;
            margin-top: 20px;
        }

        .whatsapp-btn:hover {
            background-color: #128c7e;
        }
        .whatsapp-btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: black;
            color: white;
            text-decoration: none;
            font-family: "Montserrat", sans-serif;
            border-radius: 5px;
            transition: background-color 0.3s, transform 0.2s;
            text-align: center;
        }

        .whatsapp-btn:hover {
            background-color: #444;
            transform: scale(1.05);
        }

    </style>
</head>
<body>
    <header class="header">
        <nav class="navbar navbar-expand-lg" style="background-color: black;">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <img src="images/IMG_5160.JPG" alt="Logo" width="30" height="30">
                </a>
                <a class="navbar-brand" href="index.html" style="color: white; text-align: center;">
                    LINEAS RECTAS<br>
                    <span class="subheader">AMOBLAMIENTOS</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon" style="color: white;"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link active" aria-current="page" href="index.html" style="color: white;">HOME</a></li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: white;">PRODUCTOS</a>
                            <ul class="dropdown-menu" style="background-color: black;">
                                <li><a id="vertodos" class="dropdown-item" href="indexProd.html" style="color: white;">Ver Todos</a></li>
                                <li><a class="dropdown-item" href="#" style="color: white;">Living</a></li>
                                <li><a class="dropdown-item" href="#" style="color: white;">Dormitorio</a></li>
                                <li><a class="dropdown-item" href="#" style="color: white;">Comedor</a></li>
                            </ul>
                        </li>
                        <li class="nav-item"><a class="nav-link" href="#" style="color: white;">CATALOGO DE COLORES</a></li>
                        <li class="nav-item"><a class="nav-link" href="#" style="color: white;">CONTACTO</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <section id="detalle-producto" class="container mt-5">
        <div id="producto-detalle">
            <!-- Los detalles del producto se cargarán dinámicamente aquí -->
        </div>
    </section>

    <footer class="text-center mt-5">
        <p>&copy; 2024 Todos los derechos reservados</p>
    </footer>

    <!-- Modal para ver imagen en detalle -->
    <div class="modal fade" id="modalImagen" tabindex="-1" aria-labelledby="modalImagenLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <img src="" alt="Imagen ampliada" id="imagenAmpliada">
                </div>
            </div>
        </div>
    </div>
    
   <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  const SUPABASE_URL = 'https://tldqbupxdkvolymtndrn.supabase.co';
  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRsZHFidXB4ZGt2b2x5bXRuZHJuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0NDE0NzYsImV4cCI6MjA3NTAxNzQ3Nn0.Y1YaA-qHYVAEn4rSA0LC6nGmG0RQ70zoxodLuMXOmW0';
  const client = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  const params = new URLSearchParams(window.location.search);
  const id = parseInt(params.get('id'));

  async function cargarProducto() {
    const cont = document.getElementById('producto-detalle');
    cont.innerHTML = `<p>Cargando...</p>`;

    const { data: p, error } = await client.from('productos').select('*').eq('id', id).single();
    if (error) {
      cont.innerHTML = `<p>Error: ${error.message}</p>`;
      return;
    }

    const imagenes = p.imagenes_urls && p.imagenes_urls.length > 0 ? p.imagenes_urls : ['https://via.placeholder.com/500?text=Sin+imagen'];

    let slides = '';
    imagenes.forEach((url, i) => {
      slides += `
        <div class="carousel-item ${i === 0 ? 'active' : ''}">
          <img src="${url}" class="d-block w-100" alt="Imagen ${i+1}">
        </div>`;
    });

    cont.innerHTML = `
      <div id="carruselProducto" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">${slides}</div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carruselProducto" data-bs-slide="prev">
          <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carruselProducto" data-bs-slide="next">
          <span class="carousel-control-next-icon"></span>
        </button>
      </div>
      <h2>${p.nombre}</h2>
      <p>${p.descripcion}</p>
      <p><strong>Precio:</strong> $${p.precio.toLocaleString("es-AR")}</p>
      <a href="https://wa.me/5493536574696?text=Estoy%20interesado%20en%20${encodeURIComponent(p.nombre)}" class="whatsapp-btn" target="_blank">Comprar Producto</a>
    `;
  }

  document.addEventListener('DOMContentLoaded', cargarProducto);
</script>


</body>
</html>
